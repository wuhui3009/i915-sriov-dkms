# Manual Installation Steps

1. Install build tools: `apt install build-essential dkms git` / `pacman -S base-devel dkms git`.
1. Install the kernel and headers for desired version: `apt install linux-headers-$(uname -r)` / `pacman -S linux-headers`.
1. Clone the repository: `git clone https://github.com/strongtz/i915-sriov-dkms.git`.
1. Add the module to DKMS: `dkms add ./i915-sriov-dkms`.
1. Install the module with DKMS: `dkms install i915-sriov-dkms/2026.02.09`.
1. If you have secureboot enabled, and `dkms install` tells you it created a self-signed certificate for MOK and you have not installed the host's certificate yet, install the certificate generated by dkms with `mokutil --import /var/lib/dkms/mok.pub`.
1. Once finished, the kernel commandline needs to be adjusted: `nano /etc/default/grub` and change `GRUB_CMDLINE_LINUX_DEFAULT` to `intel_iommu=on i915.enable_guc=3 i915.max_vfs=7`, or add to it if you have other arguments there already.
1. Update `grub` and `initramfs` by executing `update-grub` and `update-initramfs -u` / for Arch Linux `grub-mkconfig -o /boot/grub/grub.cfg` and `mkinitcpio -P`.
1. Optionally use `sysfsutils` to set the number of VFs on boot. Install `sysfsutils`, then do `echo "devices/pci0000:00/0000:00:02.0/sriov_numvfs = 7" > /etc/sysfs.conf`,
1. Reboot the system.

## Optional Configurations

### Block VFs on the Host
Leaving VFs exposed to the host can lead to system instability and software conflicts. VFs provide no functional benefit to the host environment; their sole purpose is to serve guest virtual machines. To ensure host stability and performance, it is highly recommended to block these VFs from the host operating system.

To apply this configuration, follow the **[Block VFs Setup Guide](block-vfs.md)**.

### UEFI Secure Boot Enabled Configuration
If secure boot support is required for you, please enable UEFI secure boot before installing i915-sriov-dkms. Note: Only applicable to Ubuntu, PVE, or other distributions based on Debian. Arch Linux users please refer to the Arch Linux Wiki.

To apply this configuration, follow the **[UEFI Secure Boot Setup Guide](secure-boot.md)**.

## Uninstallation

Depending on how you installed the dependencies or package, use the appropriate command:

### dpkg

Remove the package with `dpkg -P i915-sriov-dkms`

### pacman

Remove the package with `pacman -R i915-sriov-dkms`

### manual

Remove the dkms module with `dkms remove i915-sriov-dkms/2026.02.09`
